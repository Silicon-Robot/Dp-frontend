{"ast":null,"code":"var _jsxFileName = \"/home/angelo/Desktop/Projects/Eschool/src/auth/signIn/component/ForgotPassword.jsx\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport parseJwt from '../../../shared/utils/parseJwt.js';\nimport './ForgotPassword.css';\n\nclass ForgotPassword extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      password: '',\n      error: false,\n      message: \"\"\n    };\n\n    this.handlePasswordChange = e => {\n      this.setState({\n        password: e.target.value\n      });\n    };\n\n    this.verifyPasswords = e => {\n      let btn = document.getElementById('fgtSubmit');\n\n      if (this.state.password.length < 8) {\n        this.setState({\n          error: true,\n          message: \"Please password at least 8 characters\"\n        });\n        btn.disabled = true;\n        btn.style.backgroundColor = 'grey';\n      } else if (e.target.value !== this.state.password) {\n        this.setState({\n          error: true,\n          message: \"Passwords don't match!!!\"\n        });\n        btn.disabled = true;\n        btn.style.backgroundColor = 'grey';\n      } else {\n        btn.disabled = false;\n        btn.style.backgroundColor = '#28A08B';\n        this.setState({\n          error: false\n        });\n      }\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault(); // push to the signed in page(depending on the user that is signed in)\n\n      const id = parseJwt(window.localStorage.getItem('token')).id;\n      fetch('http://localhost:3001/reset-password', {\n        method: 'put',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          id: id,\n          password: this.state.password\n        })\n      }).then(response => response.json()).then(data => {\n        if (data.message) {\n          alert(data.message);\n          this.props.history.push('/signin');\n        } else {\n          alert(data.error);\n        }\n      }).catch(error => console.log(error.message));\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"forgotMiddle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"fgtPwdForm\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }, this.state.error ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pwdMismatchError\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 40\n      }\n    }, this.state.message) : null, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      onChange: this.handlePasswordChange,\n      className: \"fgtInput\",\n      placeholder: \"New password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      onChange: this.verifyPasswords,\n      className: \"fgtInput\",\n      placeholder: \"Confirm password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      disabled: true,\n      onClick: this.handleSubmit,\n      type: \"submit\",\n      className: \"forgetSubmit\",\n      id: \"fgtSubmit\",\n      value: \"Change password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nexport default withRouter(ForgotPassword);","map":{"version":3,"sources":["/home/angelo/Desktop/Projects/Eschool/src/auth/signIn/component/ForgotPassword.jsx"],"names":["React","Component","withRouter","parseJwt","ForgotPassword","state","password","error","message","handlePasswordChange","e","setState","target","value","verifyPasswords","btn","document","getElementById","length","disabled","style","backgroundColor","handleSubmit","preventDefault","id","window","localStorage","getItem","fetch","method","headers","body","JSON","stringify","then","response","json","data","alert","props","history","push","catch","console","log","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport { withRouter } from 'react-router';\n\nimport parseJwt from '../../../shared/utils/parseJwt.js'\nimport './ForgotPassword.css'\n\nclass ForgotPassword extends Component {\n    state={\n        password:'',\n        error:false,\n        message:\"\"\n    }\n\n    handlePasswordChange = (e)=>{\n        this.setState({\n            password: e.target.value\n        })\n    }\n\n    verifyPasswords = (e) =>{\n        let btn = document.getElementById('fgtSubmit')\n        if(this.state.password.length < 8 ){\n            this.setState({error:true, message:\"Please password at least 8 characters\"})\n            btn.disabled=true\n            btn.style.backgroundColor='grey'\n        }\n        else if(e.target.value !== this.state.password){\n            this.setState({error:true,message:\"Passwords don't match!!!\"})\n            btn.disabled=true\n            btn.style.backgroundColor='grey'\n        }else{\n            btn.disabled=false\n            btn.style.backgroundColor = '#28A08B'\n            this.setState({error:false})\n        }\n    }\n\n    handleSubmit = (e) =>{\n        e.preventDefault()\n        // push to the signed in page(depending on the user that is signed in)\n        const id = parseJwt(window.localStorage.getItem('token')).id\n\n        fetch('http://localhost:3001/reset-password', {\n            method: 'put',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({\n              id: id,\n              password: this.state.password\n            })\n        })\n        .then(response=>response.json())\n\n        .then(data=>{\n            if(data.message) {\n                alert(data.message)\n                this.props.history.push('/signin')\n            }\n            else{\n                alert(data.error)\n            }\n        })\n        .catch(error=>console.log(error.message))\n    }\n\n    render() {\n        return (\n            <div className=\"forgotMiddle\">\n                <form className=\"fgtPwdForm\" onSubmit={this.handleSubmit} >\n                    {this.state.error?(<div className='pwdMismatchError'>{this.state.message}</div>):(null)}\n                    <input type=\"password\" onChange={this.handlePasswordChange}className = 'fgtInput' placeholder='New password' />\n                    <input type=\"password\" onChange={this.verifyPasswords} className = 'fgtInput' placeholder='Confirm password' />\n                    <input disabled onClick={this.handleSubmit} type='submit' className = 'forgetSubmit' id = 'fgtSubmit' value='Change password' />\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(ForgotPassword);"]},"metadata":{},"sourceType":"module"}