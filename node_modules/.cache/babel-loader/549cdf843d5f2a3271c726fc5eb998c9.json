{"ast":null,"code":"var _jsxFileName = \"/home/angelo/Desktop/Projects/Eschool/src/auth/signUp/component/SignUpBody.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport parseJwt from '../../../shared/utils/parseJwt.js';\nimport { setUser } from '../../../store/actions/user.actions';\nimport './SignUpBody.css';\n\nclass SignUpBody extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      matricule: '',\n      nom: '',\n      prenom: '',\n      email: '',\n      tel: '',\n      password: '',\n      timeStamp: '',\n      role: 'secretiare',\n      error: false\n    };\n\n    this.handleTextInput = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    this.verifyPasswords = e => {\n      let btn = document.getElementById('signUpBtn');\n\n      if (e.target.value !== this.state.password) {\n        this.setState({\n          error: true\n        });\n        btn.disabled = true;\n        btn.style.backgroundColor = 'grey';\n      } else {\n        btn.disabled = false;\n        btn.style.backgroundColor = '#28A08B';\n        this.setState({\n          error: false\n        });\n      }\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      fetch('http://localhost:3001/signup', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: this.state.email,\n          matricule: this.state.matricule,\n          tel: this.state.tel,\n          nom: this.state.nom,\n          prenom: this.state.prenom,\n          startDate: Date.now(),\n          password: this.state.password,\n          nomRole: this.state.role\n        })\n      }).then(response => response.json()).then(data => {\n        if (data.message) {\n          const {\n            token,\n            auth\n          } = data.message;\n          window.localStorage.setItem('token', token);\n          window.localStorage.setItem('auth', auth);\n          const user = { ...parseJwt(token).user,\n            history: null,\n            hash: null,\n            role: { ...parseJwt(token)\n            }.user.role.nomRole\n          };\n          this.props.setUser(user);\n        } else {\n          console.log(data);\n        }\n      }).catch(error => console.log(error));\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"signUpForm\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, this.state.error ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pwdMismatchError\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 40\n      }\n    }, \"Passwords don't match!!!\") : null, /*#__PURE__*/React.createElement(\"input\", {\n      required: true,\n      onChange: this.handleTextInput,\n      id: \"matricule\",\n      type: \"matricule\",\n      placeholder: \"Entrez votre Matricule\",\n      className: \"signUpInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      required: true,\n      onChange: this.handleTextInput,\n      id: \"nom\",\n      type: \"text\",\n      placeholder: \"Entrez votre nom\",\n      className: \"signUpInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      required: true,\n      onChange: this.handleTextInput,\n      id: \"prenom\",\n      type: \"text\",\n      placeholder: \"Entrez votre prenom\",\n      className: \"signUpInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      required: true,\n      onChange: this.handleTextInput,\n      id: \"tel\",\n      type: \"text\",\n      placeholder: \"Entrez votre telephone\",\n      className: \"signUpInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      required: true,\n      onChange: this.handleTextInput,\n      id: \"email\",\n      type: \"email\",\n      placeholder: \"Entrez votre mail\",\n      className: \"signUpInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      required: true,\n      onChange: this.handleTextInput,\n      id: \"password\",\n      type: \"password\",\n      placeholder: \"Entrez votre mot de passe\",\n      className: \"signUpInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      required: true,\n      id: \"cPassword\",\n      onChange: this.verifyPasswords,\n      type: \"password\",\n      placeholder: \"Confirmer le mot de passe\",\n      className: \"signUpInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      onClick: this.handleSubmit,\n      disabled: true,\n      id: \"signUpBtn\",\n      type: \"submit\",\n      value: \"Sign up\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setUser: user => dispatch(setUser(user))\n});\n\nexport default connect(null, mapDispatchToProps)(SignUpBody);","map":{"version":3,"sources":["/home/angelo/Desktop/Projects/Eschool/src/auth/signUp/component/SignUpBody.jsx"],"names":["React","Component","connect","parseJwt","setUser","SignUpBody","state","matricule","nom","prenom","email","tel","password","timeStamp","role","error","handleTextInput","e","setState","target","id","value","verifyPasswords","btn","document","getElementById","disabled","style","backgroundColor","handleSubmit","preventDefault","fetch","method","headers","body","JSON","stringify","startDate","Date","now","nomRole","then","response","json","data","message","token","auth","window","localStorage","setItem","user","history","hash","props","console","log","catch","render","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux';\n\nimport parseJwt from '../../../shared/utils/parseJwt.js';\nimport {setUser} from '../../../store/actions/user.actions';\n\nimport './SignUpBody.css'\n\nclass SignUpBody extends Component {\n    state={\n        matricule:'',\n        nom:'',\n        prenom:'',\n        email:'',\n        tel:'',\n        password:'',\n        timeStamp:'',\n        role:'secretiare',\n        error:false\n    }\n\n    handleTextInput=(e)=>{\n        this.setState({\n            [e.target.id]:e.target.value\n        })\n    }\n\n    verifyPasswords = (e) =>{\n        let btn = document.getElementById('signUpBtn')\n        if(e.target.value !== this.state.password){\n            this.setState({error:true})\n            btn.disabled=true\n            btn.style.backgroundColor='grey'\n        }else{\n            btn.disabled=false\n            btn.style.backgroundColor = '#28A08B'\n            this.setState({error:false})\n        }\n    }\n\n    handleSubmit=(e)=>{\n        e.preventDefault()\n        fetch('http://localhost:3001/signup', {\n            method: 'post',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({\n              email: this.state.email,\n              matricule: this.state.matricule,\n              tel: this.state.tel,\n              nom: this.state.nom,\n              prenom: this.state.prenom,\n              startDate:Date.now(),\n              password: this.state.password,\n              nomRole:this.state.role\n            })\n            })\n          .then(response=>response.json())\n          .then(data=>{\n            if(data.message){\n              const { token, auth } = data.message\n              window.localStorage.setItem('token',token)\n              window.localStorage.setItem('auth',auth)\n              const user = {...(parseJwt(token).user), history:null, hash:null, role:{...(parseJwt(token))}.user.role.nomRole }\n              this.props.setUser(user)\n\n            }\n            else{\n                console.log(data)\n            }\n            })\n          .catch(error=>console.log(error))\n    }\n\n    render() {\n        return (\n            <div>\n                <form className='signUpForm' onSubmit={this.handleSubmit}>\n                    {this.state.error?(<div className='pwdMismatchError'>Passwords don't match!!!</div>):(null)}\n                    <input required onChange={this.handleTextInput} id='matricule' type='matricule' placeholder=\"Entrez votre Matricule\" className='signUpInput' />\n                    <input required onChange={this.handleTextInput} id='nom' type='text' placeholder=\"Entrez votre nom\" className='signUpInput' />\n                    <input required onChange={this.handleTextInput} id='prenom' type='text' placeholder=\"Entrez votre prenom\" className='signUpInput' />\n                    <input required onChange={this.handleTextInput} id='tel' type='text' placeholder=\"Entrez votre telephone\" className='signUpInput' />\n                    <input required onChange={this.handleTextInput} id='email' type='email' placeholder=\"Entrez votre mail\" className='signUpInput' />\n                    <input required onChange={this.handleTextInput} id='password' type='password' placeholder=\"Entrez votre mot de passe\" className='signUpInput' />\n                    <input required id='cPassword' onChange={this.verifyPasswords} type='password' placeholder=\"Confirmer le mot de passe\" className='signUpInput' />\n                    <input onClick={this.handleSubmit} disabled id='signUpBtn' type='submit' value='Sign up' />\n                </form>\n            </div>\n        )\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    setUser: (user)=>dispatch(setUser(user)),\n})\n\nexport default connect(null,mapDispatchToProps)(SignUpBody);"]},"metadata":{},"sourceType":"module"}