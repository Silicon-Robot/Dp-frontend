{"ast":null,"code":"var _jsxFileName = \"/home/angelo/Desktop/Projects/Eschool/src/auth/signIn/component/SignIn.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setUser } from '../../../store/actions/user.actions';\nimport parseJwt from '../../../shared/utils/parseJwt.js';\nimport './SignIn.css';\n\nclass SignInBody extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      password: ''\n    };\n\n    this.handleChange = e => {\n      e.preventDefault();\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      fetch('http://localhost:3001/signin', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: this.state.username,\n          password: this.state.password\n        })\n      }).then(response => response.json()).then(data => {\n        if (data.message) {\n          const {\n            token,\n            auth\n          } = data.message;\n          window.localStorage.setItem('token', token);\n          window.localStorage.setItem('auth', auth);\n          const user = { ...parseJwt(token).user,\n            history: null,\n            hash: null,\n            role: { ...parseJwt(token)\n            }.user.role.nomRole\n          };\n          setUser(user);\n        } else {\n          console.log(data);\n        }\n      }).catch(error => console.log(error));\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"signInForm\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-user\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      onChange: this.handleChange,\n      placeholder: \"Username\",\n      id: \"username\",\n      className: \"signInInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 43\n      }\n    })), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-key\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      onChange: this.handleChange,\n      placeholder: \"Password\",\n      id: \"password\",\n      className: \"signInInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 42\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"signInFgtPwd\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 48\n      }\n    }, \"Forgot password?\")), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Connexion\",\n      onSubmit: this.handleSubmit,\n      className: \"signInConfirm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"toSignUp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 44\n      }\n    }, \" Sign up\")), console.log(this.props));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setUser: user => dispatch(setUser(user))\n});\n\nconst mapStateToProps = state => ({\n  user: state.User\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignInBody);","map":{"version":3,"sources":["/home/angelo/Desktop/Projects/Eschool/src/auth/signIn/component/SignIn.jsx"],"names":["React","Component","Link","connect","setUser","parseJwt","SignInBody","state","username","password","handleChange","e","preventDefault","setState","target","id","value","handleSubmit","fetch","method","headers","body","JSON","stringify","email","then","response","json","data","message","token","auth","window","localStorage","setItem","user","history","hash","role","nomRole","console","log","catch","error","render","props","mapDispatchToProps","dispatch","mapStateToProps","User"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport {connect} from 'react-redux';\n\nimport { setUser } from '../../../store/actions/user.actions';\n\nimport parseJwt from '../../../shared/utils/parseJwt.js'\n\nimport './SignIn.css'\n\nclass SignInBody extends Component {\n    state={\n        username:'',\n        password:''\n    }\n\n    handleChange=(e)=>{\n        e.preventDefault()\n        this.setState({\n            [e.target.id]:e.target.value\n        })\n    }\n    \n    handleSubmit=(e)=>{\n        e.preventDefault();\n          fetch('http://localhost:3001/signin', {\n            method: 'post',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({\n              email: this.state.username,\n              password: this.state.password\n            })\n        })\n          .then(response=>response.json())\n          .then(data=>{\n            if(data.message){\n              const { token, auth } = data.message\n              window.localStorage.setItem('token',token)\n              window.localStorage.setItem('auth',auth)\n              const user = {...(parseJwt(token).user), history:null, hash:null, role:{...(parseJwt(token))}.user.role.nomRole }\n              setUser(user)\n\n            }\n            else{\n                console.log(data)\n            }\n        })\n          .catch(error=>console.log(error))\n    }\n    render() {\n        return (\n            <form className='signInForm' onSubmit={this.handleSubmit}>\n                <i className='fa fa-user'><input type='text' onChange={this.handleChange} placeholder='Username' id='username' className='signInInput' /></i>\n                <i className='fa fa-key'><input type='password' onChange={this.handleChange} placeholder='Password' id='password' className='signInInput' /></i>\n                <span className='signInFgtPwd'><Link to='/'>Forgot password?</Link></span>\n                <input type='submit' value='Connexion' onSubmit={this.handleSubmit} className='signInConfirm'/>\n                <span className='toSignUp'><Link to='/'> Sign up</Link></span>\n                {console.log(this.props)}\n            </form>\n        )\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    setUser: (user)=>dispatch(setUser(user)),\n})\nconst mapStateToProps = state => ({\n    user: state.User\n})\n\nexport default connect(mapStateToProps,mapDispatchToProps)(SignInBody);"]},"metadata":{},"sourceType":"module"}